<div ng-include src='"../../../templates/team/settings/top.html"'></div>

<div class="container pbl mbl">
  <div class="row">
    <div class="col-md-2">
    </div>
    <div class="col-md-8 col-xs-12">
      <h4>GitHub</h4>
      <p class="lead">
        GitHub provides powerful collaboration, code review, and code management for open source and private projects.
      </p>
      <h6>Authentication</h6>



      <!-- if not authorized -->
      <div ng-hide="Team.github.hasAuth(Team.github.settings)">
        <p>
          In order to use this integration, you must first authorize with GitHub.
        </p>
        <div class="form-group">
          <button class="btn btn-primary" ng-click="Team.github.oauth(Team.currentTeam)">
            <span class="octicon octicon-octoface"></span>
            &nbsp;OAuth with GitHub
          </button>
        </div>
      </div>



      <!-- if authorized -->
      <div ng-show="Team.github.hasAuth(Team.github.settings)">
        <p>
          This integration is currently authenticated with GitHub as <b>{{Team.github.settings.login}}.</b>
        </p>
        <div class="form-group">
          <button 
            class="btn btn-danger" 
            ng-click="Team.github.removeAuth(Team.currentTeam)">
            <span class="octicon octicon-octoface"></span>
            &nbsp;Remove this authentication.
          </button>
        </div>

        <hr>

        <div ng-show="Team.github.hasAuth(Team.github.settings)">
          <h4>
            Repositories
          </h4>
          <p>
            Which repositories should we be listening to?
          </p>
          <div class="btn-group form-group">
            <button class="btn btn-inverse dropdown-toggle" type="button" data-toggle="dropdown">
              Add Repository<span class="caret"></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-inverse scrollable-menu" role="menu">
              <li ng-repeat="repo in Team.userRepos">
                <a href="#">{{repo}}</a>
              </li>
            </ul>
          </div>


          <h4>
            Events
          </h4>
          <div class="row pbm">
            <div class="col-xs-12">
              <h6>
                Commit Events
              </h6>

              <label class="checkbox">
                <input type="checkbox" 
                class="custom-checkbox"
                ng-model="Team.github.settings.commits">
                <span class="icons">
                  <span class="icon-unchecked">
                  </span>
                  <span class="icon-checked">
                  </span>
                </span>
                Commits pushed to this repository
              </label>

              <label class="checkbox">
                <input type="checkbox" 
                class="custom-checkbox"
                ng-model="Team.github.settings.commit_comments">
                <span class="icons">
                  <span class="icon-unchecked">
                  </span>
                  <span class="icon-checked">
                  </span>
                </span>
                New comment on commit
              </label>
            </div>
          </div>

          <div class="row pbl">
            <div class="col-xs-12">
              <h6>
                Issue / Pull Request Events
              </h6>
              
              <label class="checkbox">
                <input type="checkbox" 
                class="custom-checkbox"
                ng-model="Team.github.settings.pull_requests">
                <span class="icons">
                  <span class="icon-unchecked">
                  </span>
                  <span class="icon-checked">
                  </span>
                </span>
                Pull request opened or closed
              </label>

              <label class="checkbox">
                <input type="checkbox" 
                class="custom-checkbox"
                ng-model="Team.github.settings.issues">
                <span class="icons">
                  <span class="icon-unchecked">
                  </span>
                  <span class="icon-checked">
                  </span>
                </span>
                Issues opened or closed
              </label>

              <label class="checkbox">
                <input type="checkbox" 
                class="custom-checkbox"
                ng-model="Team.github.settings.pr_issue_comments">
                <span class="icons">
                  <span class="icon-unchecked">
                  </span>
                  <span class="icon-checked">
                  </span>
                </span>
                New comment on issue or pull request
              </label>
            </div>
          </div>

          <button 
            class="btn btn-primary" 
            ng-click="Team.github.updateIntegration(Team.currentTeam, Team.github.settings)">
            Update settings
          </button>

        </div>

    </div>
  </div>
</div>
